# 1. 简介
与互联网类似，拥有40年历史的移动通信网络正在发生重大变化。前两代（1G和2G）支持语音和文本，3G过渡到宽带接入，支持每秒数百千比特的数据速率。如今，该行业正处于4G（支持的数据速率通常以每秒几兆计）阶段，并正在向5G过渡，数据速率有望进一步增长数十倍。

但5G不仅仅意味着更大的带宽。5G融合了几个关键技术趋势，使其走上支持实现更多创新的道路，代表了无线接入网的根本性重构。就像3G定义了从语音到宽带的过渡一样，5G的承诺主要是从单一接入服务（宽带连接）过渡到更丰富的边缘服务和设备。5G预计将为沉浸式用户体验（如AR/VR）、关键任务应用（如公共安全、自动驾驶）和物联网（IoT）提供支持。这些用例将包括从家用电器到工业机器人再到自动驾驶汽车等所有设备，因此5G将不仅支持人类通过智能手机访问互联网，还将支持大量自动设备并帮助它们一起工作。支持这些服务不仅仅是为单个用户提高带宽或减少延时。正如我们即将看到的，我们需要一个完全不同的边缘网络体系架构。

这个体系架构雄心勃勃，可以用三类功能来说明：
- 支持*大规模物联网（Massive Internet-of-Things）*，包括超低能耗（10年以上电池寿命）、超低复杂性（每秒10比特）和超高密度（每平方公里100万个节点）的设备。
- 支持*关键任务控制（Mission-Critical Control）*，包括超高可用性（大于99.999%或“5个9”)、超低延迟（低至1毫秒）和极端移动性（高达100公里/小时）。
- 支持*增强型移动宽带（Enhanced Mobile Broadband）*，峰值数据速率超过1 Gbps，平均速率达到100Mbps以上，每平方公里总吞吐量达到10 Tbps。

每一代移动通信网络都需要数十年的努力，因此这些目标不可能在一夜之间就实现。

除了这些接入网能力的量化改进之外，5G被视为一个构建支持创新平台的机会。以前的接入网通常是针对已知的服务（如语音呼叫和短信）进行优化的，而互联网之所以获得巨大成功，很大程度上是因为它支持了广泛的应用程序，而这些应用程序在最初设计时甚至都没有被想到过。5G网络的设计在很大程度上也是为了实现超越我们今天所认知的应用之外的各种未来应用。

> **延伸阅读**
>
> 要了解行业领袖对5G的宏伟愿景，请参阅高通在2016年12月发布的白皮书《让5G NR成为现实（Making 5G NR a Reality）》<sup>[1]</sup>。

5G正处于发展过程中，这不是一个单点解决方案，而是包括了标准规范、一系列实现选择和一长串雄心勃勃的目标，因此留下了很大的解释空间。我们在本书中将基于两个相互支持的原则来介绍5G。第一种是*应用系统视角*，也就是说，我们会介绍当前解决方案的一系列设计决策，而不只是把大量首字母缩写的术语或者单个技术作为*既成事实*。第二是解构这个体系。构建一个解耦的、虚拟化的、软件定义的5G接入网是该行业正在努力的一个发展方向（出于良好的技术和商业原因），但将5G网络分解成基本组件也是解释5G如何工作的最好方式。这也有助于说明5G在未来可能如何发展，以提供更多价值。

5G没有单一、全面的定义，就像互联网没有单一、全面的定义一样。它是一个复杂的、不断发展的系统，由一组标准所限定，而这些标准会给予所有相关方不同程度的自由。在接下来的章节中，可以清楚的看到我们是在讨论*标准*（每个人都必须做什么才能进行互操作）、*趋势*（行业有可能走向何方）还是*实现选择*（具体的示例）。我们的目的是介绍5G，通过全面采用系统视角，帮助读者浏览这个丰富而快速发展的系统。

> **演进路径**
>
> 5G正处于发展过程中，这是本书的中心主题。我们在此提请注意它的重要性，并将本书中再次讨论这个话题。
>
> 我们为那些了解多方面系统知识的人写这本书，目的是帮助社区快速理解这个系统（他们对蜂窝网络所知甚少），以便他们能够在5G发展过程中发挥作用。这是一个了解如何快速迭代以及构建健壮可扩展系统的最佳实践的社区，因此可以在实现5G的所有潜力方面发挥重要作用。

## 1.1. 标准全景图（Standardization Landscape）
从3G开始，每一代移动通信都由*3GPP（3rd Generation Partnership Project，第三代合作伙伴项目）*负责制定标准。尽管名称中有“3G”，但3GPP继续定义了4G和5G的标准，每一代标准都对应着该标准的一系列发布版本。第15版被认为是4G和5G之间的分界点，第17版定于2021年发布。4G处于一个被称为*LTE（Long Term Evolution，长期演进）*的多版本演进路径，这让相关术语更复杂了。5G也在类似的发展道路上，在其生命周期内预计会有几个版本发布。

理解4G是理解5G的第一步，5G在若干方面提升到了新高度，是超越4G的一个雄心勃勃的技术进步。在接下来的章节中，为了给介绍5G相应组件奠定基础，我们会介绍一些4G的架构特性。

和Wi-Fi一样，蜂窝网络在无线频谱中以特定的带宽传输数据。Wi-Fi允许任何人使用2.4 GHz或5 GHz（这些都是不需要授权的频段）频谱，而移动通信频谱则不一样，政府通过拍卖将各频段的独家使用权卖给移动运营商，后者反过来向用户出售移动接入服务。

此外，还有一个3.5 GHz的共享许可频段，称为*CBRS（Citizens Broadband Radio Service，公民宽带无线电服务）*，这一频段在北美地区专门用于蜂窝网络。其他国家也会预留类似作用的频谱。CBRS允许三类用户共享频谱资源：第一使用权归该频谱的原始所有者（海军雷达和卫星地面站）；其次是优先用户，他们通过区域拍卖获得超过10MHz频段的三年使用权；最后，其他授权用户只需要先去中央数据库查一下注册用户信息，就可以接入和使用部分可用频段。CBRS及其标准化工作将蜂窝网络扩展到非授权频段，为类似Wi-Fi的私人蜂窝网络打开了大门。

蜂窝网络的特定频段在世界各地都有所不同，而且由于运营商经常同时支持旧的遗留技术和新的下一代技术，每种技术占用不同的频段，让事情变得更加复杂。简单来说，传统的蜂窝网络频谱范围在700-2400 MHz，新的中频谱分配在6 GHz，毫米波（mmWave）为24 GHz。

虽然具体频段与从架构角度理解5G没有直接关系，但它确实会影响物理层组件，进而对整个5G系统产生间接影响。我们将在后面的章节中确定并解释这些内容。确保分配的频谱得到有效利用也是一个关键的设计指标。

## 1.2. 接入网（Access Networks）
蜂窝网络是实现互联网所谓最后一英里的接入网的一部分。其他接入技术包括*PON（Passive Optical Networks，无源光网络）*，俗称光纤入户。这些接入网由大大小小的网络运营商提供。像AT&T（美国电话电报公司）这样的全球网络运营商在像美国这样的国家的数千个汇聚点上运行接入网络，并通过全国主干网络将这些站点连接起来。小规模的区域和城市网络运营商可能会运行一个有一两个汇聚点的接入网，然后通过一些大型运营商的主干网访问互联网。

不管是哪种情况，接入网都在物理上部署在接近终端用户的数千个汇聚点上，每个汇聚点根据人口密度的不同服务于1000 - 100,000个用户。实际上，这些“边缘”位置的物理部署因运营商而异，但一种可能的方案是将蜂窝网和有线接入网络都部署在TCO（Telco Central Offices，电信核心机房）。

历史上，核心机房的正式名称为*PSTN（Public Switched Telephone Network，公共交换电话网）*核心机房，是部署有线接入（包括电话和宽带）的，而蜂窝网络则通过部署一套平行的*MTSO（Mobile Telephone Switching Offices，移动电话交换机房）*而独立发展。每个MTSO作为给定地理区域内的一组蜂窝基站的移动聚合点。对于我们而言，重要的是要知道有这样的聚合点存在，并且可以合理地认为它们定义了运营商管理的接入网的边缘。为了简单起见，我们有时使用术语“核心机房（Central Office）”作为这两种边缘站点的同义词。

## 1.3. 边缘云（Edge Cloud）
由于核心机房分布广泛，距离终端用户很近，因此也是承载边缘云的理想场所。但这又提出了一个问题：究竟什么是边缘云？

简而言之，云最初是一组仓库大小的数据中心组成，每个数据中心都提供了一种经济有效的方式给一组数量可伸缩的服务器提供能源、降温和运维的能力。随着时间的推移，这种共享基础设施降低了部署可伸缩互联网服务的门槛。不过现在有越来越多的应用程序需要低延迟和高带宽的云服务，但集中式数据中心无法有效实现这一需求。AR（Augmented Reality，增强现实）、VR（Virtual Reality，虚拟现实）、IoT（Internet-of-Things，物联网）和自动驾驶汽车都是这类应用的例子。这导致了一种趋势，一些功能将从数据中心转移到更接近最终用户的网络边缘。这个优势物理位置在哪里取决于你问的是谁。如果你问一个已经拥有并运营数千个核心机房的网络运营商，他们的核心机房就是一个显而易见的答案。而有些人可能会说是星巴克，其优势在于遍布全美的14000家星巴克咖啡店，还有人可能会指出遍布全球的数万个手机信号塔。

我们的解决方案本身是位置无关的，但值得指出的是，在云迁移到边缘的同时，还有另一个趋势，那就是网络运营商使用和云服务商一样的通用硬件以及构建可伸缩软件的最佳实践重构接入网络。这种设计有时被称为*CORD（Central Office Re-architected as a Datacenter，核心机房重构为数据中心）*，它同时支持位于共享云平台上的接入网和边缘服务。该平台随后可以被复制到数百或数千个站点（包括但不限于核心机房）。因此，虽然我们不应该局限于把核心机房作为边缘云的唯一选项，但它正在成为一个可行的选择。

> **延伸阅读**
>
> CORD最初应用于基于光纤的接入网络（PON），要了解其技术起源，请参见《IEEE Communications》2016年10月版《将核心机房重新架构为数据中心（ Central Office Re-architected as a Datacenter）》<sup>[2]</sup>。
>
> 要理解CORD（以及其他受CORD启发的技术）的商业案例，请参阅A.D. Little在2019年9月发表的报告《谁敢赢! 接入转型如何快速推动运营商生产平台的发展（ Who Dares Wins! How Access Transformation Can Fast-Track Evolution of Operator Production Platforms）》<sup>[3]</sup>。

我们将以CORD为例，介绍5G如何在实践中实现的细节。目前，需要了解的重要事情是，5G是作为运行在通用硬件上的软件实现的，而不是运行在过去几代所使用的专有硬件上。这对我们如何看待5G（以及如何描述5G）有重大影响，5G将日益成为云中的另一种基于软件的组件，而不是环绕在云外围的独立和专门的技术。

请记住，我们使用CORD作为示例并不意味着边缘云仅限于核心机房。因为CORD被设计为在一个公共平台上承载边缘服务和5G等接入技术，而电信核心机房是部署此类平台的一个可能地点，因此这是一个很好的例子。

从这次讨论中得到的一个重要结论是，了解云是如何构建的对于理解5G是如何实现的很有帮助。这包括使用*通用硬件*（包括服务器和白盒交换机）、水平可伸缩的*微服务*（也称为*云原生*）和*SDN（Software-Defined Networks，软件定义网络）*。了解云软件是如何开发、测试、部署和运维的，包括*DevOps*和*CI/CD（Continuous Integration / Continuous Deployment，持续集成/持续部署）*等实践，也很有帮助。

> **延伸阅读**
>
> 如果你不熟悉SDN，我们推荐一本配套的书：《软件定义网络：一种系统方法（Software-Defined Networks：A System Approach）》<sup>[4]</sup>。
>
> 如果您不熟悉devops，或者不熟悉云服务商面临的运营问题，我们推荐《站点可靠性工程：谷歌如何运行生产系统（Site Reliability Engineering：How Google Runs Production Systems）》<sup>[5]</sup>。

关于术语的最后一个注意事项。任何关注5G讨论的人肯定都听说过*NFV（Network Function Virtualization，网络功能虚拟化）*，它主要关注将曾经运行在专有硬件设备上的功能移植到通用服务器上的虚拟机（或者容器）中。根据我们的经验，NFV是我们在本书中描述的完全解耦和云原生解决方案的基础，因此我们不打算详细讨论它。您可以认为NFV计划与本书所采用的方法基本一致，但一些具体的工程选择可能与这里描述的细节有所不同。

虽然将NFV等同于5G的实现选择完全没有问题，但还可以从另一个角度看待NFV，而这个角度更好的反映了当前正在进行的架构迁移的本质。当电信公司开始NFV计划时，他们设想将云技术整合到他们的网络中，创建一个所谓的*电信云（Telco Cloud）*。然而实际情况是电信公司的接入技术被纳入云计算，作为另一种云托管工作负载运行，更准确的说法是*基于云计算的电信系统（Cloud-based Telco）*。阅读本书将帮助你看清所有这一切。

> **Reference:**
> 
> [1] https://www.qualcomm.com/media/documents/files/whitepaper-making-5g-nr-a-reality.pdf 
> 
> [2] https://wiki.opencord.org/download/attachments/1278027/PETERSON_CORD.pdf
> 
> [3] https://www.adlittle.com/en/who-dares-wins
> 
> [4] https://sdn.systemsapproach.org/
> 
> [5] https://landing.google.com/sre/books/
